@model List<OrderViewModel>
@using eShopSolution.ViewModels.Common;
@using eShopSolution.ViewModels.Utilities.Enums;

<!-- BREADCRUMB -->
<div id="breadcrumb" class="section">
    <!-- container -->
    <div class="container">
        <!-- row -->
        <div class="row">
            <div class="col-md-12">
                <ul class="breadcrumb-tree">
                    <li><a href="/">Trang chủ</a></li>
                    <li>Tài khoản</li>
                </ul>
            </div>
        </div>
        <!-- /row -->
    </div>
    <!-- /container -->
</div>
<!-- /BREADCRUMB -->
<!-- Main Container -->
<section class="main-container col2-right-layout">
    <div class="main container">
        <div class="row">
            <div class="col-main col-sm-12 col-xs-12">
                <div class="my-account">
                    <div class="page-title">
                        <h2>Tài khoản của bạn</h2>
                    </div>
                    <div class="dashboard">
                        <div class="welcome-msg">
                            @{
                                var claims = User.Claims.ToList();
                                var name = claims.FirstOrDefault(x => x.Type == ClaimTypes.GivenName).Value;
                            }
                            <strong>Xin chào, @name!</strong>
                            <p>Từ Trang tổng quan tài khoản của bạn, bạn có thể xem về các đơn hàng gần đây và cập nhật thông tin tài khoản của mình.</p>
                        </div>
                        <div class="recent-orders">
                            <div class="title-buttons"><strong>Đơn hàng gần đây</strong> <a href="#">View All </a> </div>
                            @if (ViewBag.SuccessMsg != null)
                            {
                                <div id="msgAlert" class="alert alert-success" role="alert">
                                    @ViewBag.SuccessMsg
                                </div>
                            }
                            else if (ViewBag.FailMsg != null)
                            {
                                <div id="msgAlert" class="alert alert-danger" role="alert">
                                    @ViewBag.FailMsg
                                </div>
                            }
                            <div class="table-responsive">
                                <table class="table table-bordered cart_summary table-striped" style="margin-top:10px">
                                    <colgroup>
                                        <col>
                                        <col>
                                        <col>
                                        <col width="1">
                                        <col width="1">
                                        <col width="1">
                                    </colgroup>
                                    <thead>
                                        <tr class="first last">
                                            <th class="text-center">
                                                ID
                                            </th>
                                            <th>
                                                Khách hàng
                                            </th>
                                            <th class="text-center">
                                                Ngày đặt
                                            </th>
                                            <th class="text-center">
                                                Trạng thái
                                            </th>
                                            <th class="text-center">
                                                Giá trị đơn hàng
                                            </th>
                                            <th class="text-center">
                                                Xử lý đơn
                                            </th>
                                            <th class="text-center">
                                                Thao tác
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @foreach (var item in Model)
                                        {
                                            <tr class="first odd">
                                                <td>@item.Id</td>
                                                <td>@item.Name</td>
                                                <td>@item.OrderDate</td>
                                                <td class="text-center">
                                                    @{
                                                        var status = "";
                                                        var statusEnum = (int)item.Status;
                                                        switch (statusEnum)
                                                        {
                                                            case 1:
                                                                status = "Đang chờ duyệt";
                                                                break;
                                                            case 2:
                                                                status = "Đã duyệt";
                                                                break;
                                                            case 3:
                                                                status = "Đang giao";
                                                                break;
                                                            case 4:
                                                                status = "Đã giao";
                                                                break;
                                                            case 5:
                                                                status = "Đã huỷ";
                                                                break;
                                                            default:
                                                                status = "...";
                                                                break;
                                                        }
                                                    }
                                                    @status
                                                </td>
                                                <td class="text-center">
                                                    @item.Price.ToString("N0")
                                                    <span>&#8363;</span>
                                                </td>
                                                <td class="text-center">

                                                    @if (item.Status == (OrderStatus)1)
                                                    {
                                                        @Html.ActionLink("Huỷ đơn", "CancelOrderStatus", new { orderId = item.Id })
                                                    }
                                                    else if (item.Status == (OrderStatus)2)
                                                    {
                                                        @Html.ActionLink("Huỷ đơn", "CancelOrderStatus", new { orderId = item.Id })
                                                    }
                                                </td>
                                                <td class="text-center">
                                                    @Html.ActionLink("Xem chi tiết", "Details", new { id = item.Id })
                                                </td>
                                            </tr>
                                        }

                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <div class="box-account">
                            <div class="page-title">
                                <h2>Thông tin tài khoản</h2>
                            </div>
                            <div class="col2-set">
                                <div class="col-1">
                                    <h6>Contact Information</h6>
                                    <a href="#">Edit</a>
                                    <p>
                                        jones don<br>
                                        jonesd15@gmail.com<br>
                                        <a href="#">Change Password</a>
                                    </p>
                                </div>
                                <div class="col-2">
                                    <h5>Newsletters</h5>
                                    <a href="#">Edit</a>
                                    <p> You are currently not subscribed to any newsletter. </p>
                                </div>
                            </div>
                            <div class="col2-set">
                                <h5>Address Book</h5>
                                <div class="manage_add"><a href="#">Manage Addresses</a> </div>
                                <div class="col-1">
                                    <h5>Primary Billing Address</h5>
                                    <address>
                                        jones d<br>
                                        Hawaii<br>
                                        Britain,  North America, 65432<br>
                                        United States<br>
                                        T: 123456 <br>
                                        <a href="#">Edit Address</a>
                                    </address>
                                </div>
                                <div class="col-2">
                                    <h5>Primary Shipping Address</h5>
                                    <address>
                                        jones d<br>
                                        Hawaii<br>
                                        Britain,  North America, 65432<br>
                                        United States<br>
                                        T: 123456 <br>
                                        <a href="#">Edit Address</a>
                                    </address>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>